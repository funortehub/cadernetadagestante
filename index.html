<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Caderneta da Gestante</title>
    
    <!-- Manifest incorporado -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkNhZGVybmV0YSBkYSBHZXN0YW50ZSIsCiAgInNob3J0X25hbWUiOiAiQ2FkZXJuZXRhIiwKICAic3RhcnRfdXJsIjogIi4vIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjRkZGRkZGIiwKICAidGhlbWVfY29sb3IiOiAiIzgzNkZGRiIsCiAgImRlc2NyaXB0aW9uIjogIkFwbGljYXRpdm8gcGFyYSBhY29tcGFuaGFtZW50byBkYSBnZXN0YcOnw6NvIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiaHR0cHM6Ly9pLmltZ3VyLmNvbS9wM29obkE5LnBuZyIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIiwKICAgICAgInB1cnBvc2UiOiAiYW55IG1hc2thYmxlIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJodHRwczovL2kuaW1ndXIuY29tL3Azb2huQTkucG5nIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciLAogICAgICAicHVycG9zZSI6ICJhbnkgbWFza2FibGUiCiAgICB9CiAgXQp9">
    
    <link rel="icon" type="image/png" href="https://i.imgur.com/UdqvWLG.jpeg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Caderneta">
    <link rel="apple-touch-icon" href="https://i.imgur.com/UdqvWLG.jpeg">
    <link rel="mask-icon" href="https://i.imgur.com/UdqvWLG.jpeg" color="#836FFF">
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Estilos permanecem os mesmos */
        /* ... (todos os estilos anteriores permanecem inalterados) ... */
    </style>
</head>
<body>
    <!-- Splash screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">
            <img src="https://i.imgur.com/p3ohnA9.png" alt="Logo">
        </div>
        <h1 class="splash-title">Caderneta da Gestante</h1>
        <p class="splash-subtitle">Acompanhamento completo da sua gestação</p>
        <div class="splash-progress">
            <div class="splash-progress-bar" id="splashProgress"></div>
        </div>
    </div>
    
    <!-- Offline indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <i class="material-icons">signal_wifi_off</i> Você está offline
    </div>
    
    <div class="container">
        <!-- Loading overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
        </div>
        
        <!-- Tela 1: Cadastro Inicial -->
        <div id="screen1" class="screen active">
            <!-- ... (conteúdo inalterado) ... -->
        </div>

        <!-- Tela 2: Menu Principal -->
        <div id="screen2" class="screen">
            <!-- ... (conteúdo inalterado) ... -->
        </div>

        <!-- Tela 3: Dados da Gestante -->
        <div id="screen3" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Dados da Gestante</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="gestanteForm">
                        <div class="form-group">
                            <label for="displayName">Nome Completo</label>
                            <input type="text" id="displayName" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="partnerName">Nome do Companheiro (Opcional)</label>
                            <input type="text" id="partnerName" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="displayBirthDate">Data de Nascimento</label>
                            <input type="date" id="displayBirthDate" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="displayAge">Idade</label>
                            <input type="text" id="displayAge" class="form-control" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label>Raça/Cor</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="race" value="Branca"> Branca
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="race" value="Preta"> Preta
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="race" value="Amarela"> Amarela
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="race" value="Parda"> Parda
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="race" value="Indígena"> Indígena
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Trabalha fora de casa?</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="worksOutside" value="Sim"> Sim
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="worksOutside" value="Não"> Não
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="displayOccupation">Ocupação</label>
                            <input type="text" id="displayOccupation" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="displayAddress">Endereço</label>
                            <input type="text" id="displayAddress" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="displaySusCard">Nº Cartão do SUS</label>
                            <input type="text" id="displaySusCard" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="nisCard">Nº Cartão do NIS</label>
                            <input type="text" id="nisCard" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="displayEmergencyPhone">Telefone de Emergência</label>
                            <input type="text" id="displayEmergencyPhone" class="form-control">
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" class="btn">Salvar Alterações</button>
                            <button type="button" class="btn btn-danger" onclick="deleteAllData()">
                                <i class="material-icons btn-icon">delete</i>
                                Apagar Dados
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Tela 4: Telefones Úteis -->
        <div id="screen4" class="screen">
            <!-- ... (conteúdo inalterado) ... -->
        </div>

        <!-- Tela 6: Conheça Seus Direitos -->
        <div id="screen6" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Conheça Seus Direitos</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <h3 class="card-title">Direitos da Gestante</h3>
                    <p>Como gestante, você tem direitos garantidos por lei. Conheça alguns deles:</p>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li><strong>Pré-natal humanizado:</strong> Direito a atendimento digno e respeitoso durante toda a gestação.</li>
                        <li><strong>Licença-maternidade:</strong> Direito a 120 dias de afastamento remunerado do trabalho.</li>
                        <li><strong>Estabilidade no emprego:</strong> A gestante não pode ser demitida sem justa causa desde a confirmação da gravidez até 5 meses após o parto.</li>
                        <li><strong>Isenção de impostos:</strong> Em alguns estados, isenção de ICMS na compra de enxoval para o bebê.</li>
                        <li><strong>Atendimento prioritário:</strong> Direito a atendimento preferencial em filas e assentos preferenciais em transportes públicos.</li>
                        <li><strong>Saúde gratuita:</strong> Direito ao atendimento gratuito no SUS durante toda a gestação, parto e pós-parto.</li>
                        <li><strong>Amamentação:</strong> Direito a intervalos durante a jornada de trabalho para amamentação até o bebê completar 6 meses.</li>
                    </ul>
                    <p>Para mais informações, consulte o site do Ministério da Saúde ou a Secretaria de Saúde do seu município.</p>
                </div>
            </div>
        </div>

        <!-- Tela 8: Monitoramento do Ganho de Peso Gestacional -->
        <div id="screen8" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Monitoramento de Peso</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="weightForm">
                        <div class="form-group">
                            <label for="weightDate">Data</label>
                            <input type="date" id="weightDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="currentWeight">Peso (kg)</label>
                            <input type="number" id="currentWeight" class="form-control" step="0.1" required>
                        </div>
                        
                        <button type="submit" class="btn">Registrar Medidas</button>
                    </form>
                    
                    <div class="chart-container">
                        <canvas id="weightChart"></canvas>
                    </div>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Peso</h3>
                    <div id="weightHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 10: Consulta da Gestante -->
        <div id="screen10" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Consulta da Gestante</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="pregnancyForm">
                        <div class="form-group">
                            <label for="consultDate">Data</label>
                            <input type="date" id="consultDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gestationalAge">Idade Gestacional (semanas)</label>
                            <input type="number" id="gestationalAge" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="uterineHeight">Altura Uterina (cm)</label>
                            <input type="number" id="uterineHeight" class="form-control" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="fetalHeartbeat">Batimento Cardíaco Fetal (BCF)</label>
                            <input type="number" id="fetalHeartbeat" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="fetalMovement">Movimentação Fetal</label>
                            <select id="fetalMovement" class="form-control">
                                <option value="Normal">Normal</option>
                                <option value="Aumentada">Aumentada</option>
                                <option value="Diminuída">Diminuída</option>
                                <option value="Ausente">Ausente</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="consultNotes">Anotações</label>
                            <textarea id="consultNotes" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="consultGuidance">Orientações</label>
                            <textarea id="consultGuidance" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <button type="submit" class="btn">Salvar Consulta</button>
                    </form>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Consultas</h3>
                    <div id="consultHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 11: Cartão de Vacina -->
        <div id="screen11" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Cartão de Vacina</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <div class="tabs">
                        <div class="tab active" onclick="changeVaccineTab('gestante')">Gestante</div>
                        <div class="tab" onclick="changeVaccineTab('bebe')">Bebê</div>
                    </div>
                    
                    <div id="gestanteVaccines" class="tab-content active">
                        <form id="vaccineForm">
                            <input type="hidden" id="vaccineType" value="gestante">
                            
                            <div class="form-group">
                                <label for="vaccineName">Vacina</label>
                                <select id="vaccineName" class="form-control" required>
                                    <option value="">Selecione...</option>
                                    <option value="Hepatite B">Hepatite B</option>
                                    <option value="Dupla Adulto (dT)">Dupla Adulto (dT)</option>
                                    <option value="Influenza (Gripe)">Influenza (Gripe)</option>
                                    <option value="Febre Amarela">Febre Amarela</option>
                                    <option value="Tríplice Viral">Tríplice Viral</option>
                                    <option value="Hepatite A">Hepatite A</option>
                                    <option value="Pneumocócica 23-valente">Pneumocócica 23-valente</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="vaccineDate">Data de Aplicação</label>
                                <input type="date" id="vaccineDate" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="vaccineDose">Dose</label>
                                <input type="text" id="vaccineDose" class="form-control" required>
                            </div>
                            
                            <button type="submit" class="btn">Registrar Vacina</button>
                        </form>
                    </div>
                    
                    <div id="bebeVaccines" class="tab-content">
                        <form id="babyVaccineForm">
                            <input type="hidden" id="babyVaccineType" value="bebe">
                            
                            <div class="form-group">
                                <label for="babyVaccineName">Vacina</label>
                                <select id="babyVaccineName" class="form-control" required>
                                    <option value="">Selecione...</option>
                                    <option value="BCG">BCG (contra formas graves de tuberculose)</option>
                                    <option value="Hepatite B">Hepatite B</option>
                                    <option value="Penta/DTP">Penta/DTP (difteria, tétano, coqueluche, hepatite B e Hib)</option>
                                    <option value="VIP/VOP">VIP/VOP (poliomielite)</option>
                                    <option value="Pneumocócica 10-valente">Pneumocócica 10-valente</option>
                                    <option value="Rotavírus">Rotavírus</option>
                                    <option value="Meningocócica C">Meningocócica C</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="babyVaccineDate">Data de Aplicação</label>
                                <input type="date" id="babyVaccineDate" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="babyVaccineDose">Dose</label>
                                <input type="text" id="babyVaccineDose" class="form-control" required>
                            </div>
                            
                            <button type="submit" class="btn">Registrar Vacina</button>
                        </form>
                    </div>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Vacinas</h3>
                    <div id="vaccineHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 12: Exames Laboratoriais -->
        <div id="screen12" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Exames Laboratoriais</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="labExamForm">
                        <div class="form-group">
                            <label for="examName">Nome do Exame</label>
                            <input type="text" id="examName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="examDate">Data do Exame</label>
                            <input type="date" id="examDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="labFiles">Anexar Resultado (PDF ou Imagem)</label>
                            <input type="file" id="labFiles" class="form-control" accept=".pdf,.jpg,.jpeg,.png" multiple>
                        </div>
                        
                        <button type="submit" class="btn">Salvar Exame</button>
                    </form>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Exames</h3>
                    <div id="labExamsHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 13: Exames de Imagem -->
        <div id="screen13" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Exames de Imagem</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="imageExamForm">
                        <div class="form-group">
                            <label for="imageExamName">Nome do Exame</label>
                            <input type="text" id="imageExamName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="imageExamDate">Data do Exame</label>
                            <input type="date" id="imageExamDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="imageFiles">Anexar Imagens</label>
                            <input type="file" id="imageFiles" class="form-control" accept="image/*" multiple>
                        </div>
                        
                        <button type="submit" class="btn">Salvar Exame</button>
                    </form>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Exames</h3>
                    <div id="imageExamsHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 14: Suplementação -->
        <div id="screen14" class="screen">
            <!-- ... (conteúdo inalterado) ... -->
        </div>

        <!-- Tela 16: Monitoramento do Trabalho de Parto -->
        <div id="screen16" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Monitoramento do Trabalho de Parto</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <div class="contraction-timer">
                        <h3 class="card-title">Cronômetro de Contração</h3>
                        <div class="timer-display" id="contractionTimer">00:00:00</div>
                        <button id="startContractionBtn" class="btn">Iniciar Contração</button>
                        <button id="endContractionBtn" class="btn" style="display: none;">Finalizar Contração</button>
                        <button id="resetContractionBtn" class="btn btn-outline" style="margin-top: 10px;">Reiniciar</button>
                    </div>
                    
                    <form id="contractionForm" style="margin-top: 20px;">
                        <div class="form-group">
                            <label for="contractionStartTime">Horário de Início</label>
                            <input type="text" id="contractionStartTime" class="form-control" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="contractionEndTime">Horário de Término</label>
                            <input type="text" id="contractionEndTime" class="form-control" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="contractionDuration">Duração</label>
                            <input type="text" id="contractionDuration" class="form-control" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="contractionIntensity">Intensidade</label>
                            <select id="contractionIntensity" class="form-control">
                                <option value="Leve">Leve</option>
                                <option value="Moderada">Moderada</option>
                                <option value="Forte">Forte</option>
                                <option value="Muito Forte">Muito Forte</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn">Registrar Contração</button>
                    </form>

                    <h3 class="card-title" style="margin-top: 20px;">Histórico de Contrações</h3>
                    <div id="contractionHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tela 17: Meu Bebê (Reformulada) -->
        <div id="screen17" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Meu Bebê</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <h3 class="card-title">Galeria do Bebê</h3>
                    <div id="babyGallery" class="gallery">
                        <!-- As molduras serão adicionadas aqui dinamicamente -->
                        <div class="gallery-item add-photo" onclick="document.getElementById('babyPhotoInput').click()">
                            <i class="material-icons">add</i>
                        </div>
                    </div>
                    <input type="file" id="babyPhotoInput" style="display: none;" accept="image/*" multiple>
                </div>
            </div>
        </div>

        <!-- Tela 18: Orientações Gerais -->
        <div id="screen18" class="screen">
            <!-- ... (conteúdo inalterado) ... -->
        </div>

        <!-- Tela 19: Diário da Gestante -->
        <div id="screen19" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Diário da Gestante</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <form id="diaryForm">
                        <div class="form-group">
                            <label for="diaryDate">Data</label>
                            <input type="date" id="diaryDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="diaryFeelings">Sentimentos</label>
                            <textarea id="diaryFeelings" class="form-control" rows="3" placeholder="Como você está se sentindo hoje?" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="diarySymptoms">Sintomas</label>
                            <textarea id="diarySymptoms" class="form-control" rows="3" placeholder="Quais sintomas você está sentindo?"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="diaryQuestions">Dúvidas</label>
                            <textarea id="diaryQuestions" class="form-control" rows="3" placeholder="Quais dúvidas você gostaria de esclarecer na próxima consulta?"></textarea>
                        </div>
                        
                        <button type="submit" class="btn">Salvar Registro</button>
                    </form>

                    <h3 class="card-title" style="margin-top: 20px;">Registros Anteriores</h3>
                    <div id="diaryHistory" class="history-list">
                        <!-- Histórico será adicionado aqui -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tela 20: Login Médico -->
        <div id="screen20" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen2')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Acesso Médico</h1>
            </div>
            
            <div class="screen-content">
                <div class="login-card">
                    <form id="doctorLoginForm">
                        <div class="form-group">
                            <label for="doctorUsername">Usuário</label>
                            <input type="text" id="doctorUsername" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="doctorPassword">Senha</label>
                            <input type="password" id="doctorPassword" class="form-control" required>
                        </div>
                        
                        <button type="submit" class="btn">Entrar</button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Tela 21: Lista de Pacientes (Acesso Médico) -->
        <div id="screen21" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen20')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Pacientes</h1>
            </div>
            
            <div class="screen-content">
                <div class="card">
                    <div class="form-group">
                        <input type="text" id="searchPatient" class="form-control" placeholder="Buscar paciente...">
                    </div>
                    
                    <div id="patientsList" class="patient-list">
                        <!-- Lista de pacientes será carregada aqui -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tela 22: Detalhes do Paciente (Acesso Médico) -->
        <div id="screen22" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('screen21')">
                    <i class="material-icons">arrow_back</i>
                </button>
                <h1>Detalhes do Paciente</h1>
                <button class="btn" id="editPatientBtn">Editar</button>
            </div>
            
            <div class="screen-content">
                <div id="patientDetails">
                    <!-- Os detalhes do paciente serão carregados aqui -->
                </div>
            </div>
        </div>
        
        <!-- Modal para visualização de imagens -->
        <div id="imageModal" class="modal">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="modalImage">
        </div>
    </div>

    <button id="installBtn" class="install-btn">
        <i class="material-icons btn-icon">get_app</i>
        Instalar App
    </button>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCPgUVI_C92mGGWzYRvYJR6jUXGPNlGzF8",
            authDomain: "cadernetadagestante.firebaseapp.com",
            projectId: "cadernetadagestante",
            storageBucket: "cadernetadagestante.appspot.com",
            messagingSenderId: "765137865236",
            appId: "1:765137865236:web:d4555e5ebb0b3780753501"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        // Global variables
        let currentUser = null;
        let deferredPrompt = null;
        let contractionInterval = null;
        let contractionStartTime = null;
        let contractionTimerSeconds = 0;
        let weightChart = null;
        let currentPatientId = null;
        let isEditingPatient = false;

        // DOM elements
        const installBtn = document.getElementById('installBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const offlineIndicator = document.getElementById('offlineIndicator');
        const splashScreen = document.getElementById('splashScreen');
        const splashProgress = document.getElementById('splashProgress');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Splash screen animation
            let progress = 0;
            const splashInterval = setInterval(() => {
                progress += 1;
                splashProgress.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(splashInterval);
                    splashScreen.style.opacity = '0';
                    setTimeout(() => {
                        splashScreen.style.display = 'none';
                    }, 500);
                }
            }, 30);
            
            // Simulate loading delay
            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 300);
            }, 1500);
            
            // Check if user data exists in localStorage
            const userData = localStorage.getItem('gestanteUser');
            if (userData) {
                currentUser = JSON.parse(userData);
                showScreen('screen2');
                updateUserDisplay();
            }
            
            // Set up event listeners
            setupEventListeners();
            
            // Check for PWA install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                installBtn.classList.add('show');
            });
            
            installBtn.addEventListener('click', installPWA);
            
            // Prevent zooming on mobile devices
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            });
            
            document.addEventListener('touchmove', function(e) {
                if(e.scale !== 1) e.preventDefault();
            }, { passive: false });
            
            // Register service worker for PWA functionality
            registerServiceWorker();
            
            // Check online/offline status
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            updateOnlineStatus();

            // Load history for various screens
            loadAllHistory();
        });
        
        // Register service worker
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado com escopo:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            }
        }
        
        // Update online status
        function updateOnlineStatus() {
            if (navigator.onLine) {
                offlineIndicator.classList.remove('show');
            } else {
                offlineIndicator.classList.add('show');
            }
        }
        
        // Set up all event listeners
        function setupEventListeners() {
            // Registration form
            document.getElementById('registrationForm').addEventListener('submit', registerUser);
            
            // Gestante form
            document.getElementById('gestanteForm').addEventListener('submit', saveGestanteData);
            
            // Weight form
            document.getElementById('weightForm').addEventListener('submit', saveWeightData);
            
            // Pregnancy form
            document.getElementById('pregnancyForm').addEventListener('submit', savePregnancyData);
            
            // Vaccine form
            document.getElementById('vaccineForm').addEventListener('submit', saveVaccine);
            document.getElementById('babyVaccineForm').addEventListener('submit', saveVaccine);
            
            // Contraction timer
            document.getElementById('startContractionBtn').addEventListener('click', startContractionTimer);
            document.getElementById('endContractionBtn').addEventListener('click', endContractionTimer);
            document.getElementById('resetContractionBtn').addEventListener('click', resetContractionTimer);
            document.getElementById('contractionForm').addEventListener('submit', saveContraction);
            
            // Diary form
            document.getElementById('diaryForm').addEventListener('submit', saveDiaryEntry);

            // Lab exam form
            document.getElementById('labExamForm').addEventListener('submit', saveLabExam);

            // Image exam form
            document.getElementById('imageExamForm').addEventListener('submit', saveImageExam);
            
            // Baby photo upload
            document.getElementById('babyPhotoInput').addEventListener('change', handleBabyPhotoUpload);
            
            // Doctor login form
            document.getElementById('doctorLoginForm').addEventListener('submit', doctorLogin);
            
            // Search patient
            document.getElementById('searchPatient').addEventListener('input', searchPatients);
        }
        
        // Show a specific screen
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            document.getElementById(screenId).classList.add('active');
            
            // Scroll to top when changing screens
            document.getElementById(screenId).scrollTop = 0;

            // Load history for specific screens
            switch(screenId) {
                case 'screen6':
                    // Nada específico para carregar
                    break;
                case 'screen8':
                    displayWeightHistory();
                    break;
                case 'screen10':
                    displayConsultHistory();
                    break;
                case 'screen11':
                    displayVaccineHistory();
                    break;
                case 'screen12':
                    displayLabExamsHistory();
                    break;
                case 'screen13':
                    displayImageExamsHistory();
                    break;
                case 'screen16':
                    displayContractionHistory();
                    break;
                case 'screen17':
                    displayBabyGallery();
                    break;
                case 'screen18':
                    changeGuidanceTab('discovery');
                    break;
                case 'screen19':
                    displayDiaryHistory();
                    break;
                case 'screen21':
                    loadPatients();
                    break;
            }
        }

        // Load all history data
        function loadAllHistory() {
            displayWeightHistory();
            displayConsultHistory();
            displayVaccineHistory();
            displayLabExamsHistory();
            displayImageExamsHistory();
            displayContractionHistory();
            displayBabyGallery();
            displayDiaryHistory();
        }
        
        // Register a new user
        function registerUser(e) {
            e.preventDefault();
            
            const userData = {
                fullName: document.getElementById('fullName').value,
                birthDate: document.getElementById('birthDate').value,
                cpf: document.getElementById('cpf').value,
                susCard: document.getElementById('susCard').value,
                email: document.getElementById('email').value,
                occupation: document.getElementById('occupation').value,
                address: document.getElementById('address').value,
                emergencyPhone: document.getElementById('emergencyPhone').value,
                createdAt: new Date()
            };
            
            // Show loading
            showLoading();
            
            // Save to Firestore
            db.collection("usuarios").add(userData)
                .then(docRef => {
                    console.log("Usuário cadastrado com ID: ", docRef.id);
                    currentUser = { id: docRef.id, ...userData };
                    localStorage.setItem('gestanteUser', JSON.stringify(currentUser));
                    
                    // Update UI
                    updateUserDisplay();
                    
                    hideLoading();
                    
                    showScreen('screen2');
                    
                    // Show success message
                    alert('Cadastro realizado com sucesso!');
                })
                .catch(error => {
                    console.error("Erro ao cadastrar usuário: ", error);
                    hideLoading();
                    alert('Erro ao cadastrar. Tente novamente.');
                });
        }
        
        // Update user display information
        function updateUserDisplay() {
            if (!currentUser) return;
            
            document.getElementById('userName').textContent = currentUser.fullName.split(' ')[0];
            
            // Screen 3 - Gestante Data
            document.getElementById('displayName').value = currentUser.fullName || '';
            document.getElementById('displayBirthDate').value = currentUser.birthDate || '';
            document.getElementById('displayAge').value = calculateAge(currentUser.birthDate) || '';
            document.getElementById('partnerName').value = currentUser.partnerName || '';
            document.getElementById('displayOccupation').value = currentUser.occupation || '';
            document.getElementById('displayAddress').value = currentUser.address || '';
            document.getElementById('displaySusCard').value = currentUser.susCard || '';
            document.getElementById('nisCard').value = currentUser.nisCard || '';
            document.getElementById('displayEmergencyPhone').value = currentUser.emergencyPhone || '';
            
            // Set radio buttons
            if (currentUser.race) {
                document.querySelector(`input[name="race"][value="${currentUser.race}"]`).checked = true;
            }
            
            if (currentUser.worksOutside) {
                document.querySelector(`input[name="worksOutside"][value="${currentUser.worksOutside}"]`).checked = true;
            }
        }
        
        // Format date to Brazilian format
        function formatDate(dateString) {
            if (!dateString) return '';
            
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        // Calculate age from birth date
        function calculateAge(birthDate) {
            if (!birthDate) return '';
            
            const today = new Date();
            const birth = new Date(birthDate);
            let age = today.getFullYear() - birth.getFullYear();
            const monthDiff = today.getMonth() - birth.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            
            return age + ' anos';
        }
        
        // Save gestante data
        function saveGestanteData(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            // Get updated data
            const updatedData = {
                fullName: document.getElementById('displayName').value,
                birthDate: document.getElementById('displayBirthDate').value,
                occupation: document.getElementById('displayOccupation').value,
                address: document.getElementById('displayAddress').value,
                susCard: document.getElementById('displaySusCard').value,
                emergencyPhone: document.getElementById('displayEmergencyPhone').value,
                partnerName: document.getElementById('partnerName').value,
                nisCard: document.getElementById('nisCard').value
            };
            
            // Get selected values
            const race = document.querySelector('input[name="race"]:checked');
            updatedData.race = race ? race.value : '';
            
            const worksOutside = document.querySelector('input[name="worksOutside"]:checked');
            updatedData.worksOutside = worksOutside ? worksOutside.value : '';
            
            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).update(updatedData)
            .then(() => {
                // Update local user data
                currentUser = {...currentUser, ...updatedData};
                localStorage.setItem('gestanteUser', JSON.stringify(currentUser));
                hideLoading();
                alert('Dados atualizados com sucesso!');
            })
            .catch(error => {
                console.error("Erro ao atualizar dados: ", error);
                hideLoading();
                alert('Erro ao atualizar dados. Tente novamente.');
            });
        }
        
        // Delete all user data
        function deleteAllData() {
            if (confirm('Tem certeza que deseja apagar todos os seus dados? Esta ação não pode ser desfeita.')) {
                // Delete from Firestore
                if (currentUser && currentUser.id) {
                    showLoading();
                    db.collection("usuarios").doc(currentUser.id).delete()
                        .then(() => {
                            localStorage.removeItem('gestanteUser');
                            currentUser = null;
                            hideLoading();
                            showScreen('screen1');
                            alert('Todos os dados foram apagados com sucesso.');
                        })
                        .catch(error => {
                            console.error("Erro ao apagar dados: ", error);
                            hideLoading();
                            alert('Erro ao apagar dados. Tente novamente.');
                        });
                } else {
                    localStorage.removeItem('gestanteUser');
                    currentUser = null;
                    showScreen('screen1');
                    alert('Todos os dados foram apagados com sucesso.');
                }
            }
        }
        
        // Save weight data
        function saveWeightData(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const weightData = {
                date: document.getElementById('weightDate').value,
                weight: parseFloat(document.getElementById('currentWeight').value),
                timestamp: new Date()
            };

            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("peso").add(weightData)
                .then(() => {
                    hideLoading();
                    alert('Peso registrado com sucesso!');
                    document.getElementById('weightForm').reset();
                    displayWeightHistory();
                })
                .catch(error => {
                    console.error("Erro ao salvar peso: ", error);
                    hideLoading();
                    alert('Erro ao registrar peso. Tente novamente.');
                });
        }

        function displayWeightHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('weightHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Get weight history from Firestore
            db.collection("usuarios").doc(currentUser.id).collection("peso")
                .orderBy("timestamp", "desc")
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum registro encontrado.</p>';
                        return;
                    }
                    
                    let html = '<ul class="history-list">';
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        html += `
                            <li class="list-item">
                                <div>
                                    <strong>${formatDate(data.date)}</strong> - ${data.weight} kg
                                </div>
                                <button class="btn btn-danger" onclick="deleteWeightRecord('${doc.id}')">
                                    <i class="material-icons">delete</i>
                                </button>
                            </li>
                        `;
                    });
                    html += '</ul>';
                    
                    container.innerHTML = html;
                    
                    // Create/update chart
                    createWeightChart(querySnapshot);
                })
                .catch(error => {
                    console.error("Erro ao carregar histórico de peso: ", error);
                    container.innerHTML = '<p>Erro ao carregar histórico.</p>';
                });
        }
        
        // Delete weight record
        function deleteWeightRecord(recordId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este registro?')) return;
            
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("peso").doc(recordId).delete()
                .then(() => {
                    hideLoading();
                    displayWeightHistory();
                })
                .catch(error => {
                    console.error("Erro ao excluir registro de peso: ", error);
                    hideLoading();
                    alert('Erro ao excluir registro. Tente novamente.');
                });
        }
        
        function createWeightChart(querySnapshot) {
            const ctx = document.getElementById('weightChart').getContext('2d');
            const dates = [];
            const weights = [];
            
            querySnapshot.forEach(doc => {
                const data = doc.data();
                dates.push(formatDate(data.date));
                weights.push(data.weight);
            });
            
            // Reverse to show in chronological order
            dates.reverse();
            weights.reverse();
            
            // Destroy previous chart if exists
            if (weightChart) {
                weightChart.destroy();
            }
            
            // Create new chart
            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Peso (kg)',
                        data: weights,
                        borderColor: '#836FFF',
                        backgroundColor: 'rgba(131, 111, 255, 0.1)',
                        borderWidth: 2,
                        pointBackgroundColor: '#836FFF',
                        pointRadius: 4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Peso (kg)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Data'
                            }
                        }
                    }
                }
            });
        }
        
        // Save pregnancy data
        function savePregnancyData(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const pregnancyData = {
                date: document.getElementById('consultDate').value,
                gestationalAge: document.getElementById('gestationalAge').value,
                uterineHeight: document.getElementById('uterineHeight').value,
                fetalHeartbeat: document.getElementById('fetalHeartbeat').value,
                fetalMovement: document.getElementById('fetalMovement').value,
                notes: document.getElementById('consultNotes').value,
                guidance: document.getElementById('consultGuidance').value,
                timestamp: new Date()
            };

            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("consultas").add(pregnancyData)
                .then(() => {
                    hideLoading();
                    alert('Consulta registrada com sucesso!');
                    document.getElementById('pregnancyForm').reset();
                    displayConsultHistory();
                })
                .catch(error => {
                    console.error("Erro ao salvar consulta: ", error);
                    hideLoading();
                    alert('Erro ao registrar consulta. Tente novamente.');
                });
        }

        function displayConsultHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('consultHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Get consult history from Firestore
            db.collection("usuarios").doc(currentUser.id).collection("consultas")
                .orderBy("timestamp", "desc")
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum registro encontrado.</p>';
                        return;
                    }
                    
                    let html = '<ul class="history-list">';
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        html += `
                            <li class="list-item">
                                <div>
                                    <strong>${formatDate(data.date)}</strong> - ${data.gestationalAge} semanas
                                    <div>Alt. uterina: ${data.uterineHeight || '-'}cm | BCF: ${data.fetalHeartbeat || '-'}</div>
                                    <div>Movimentação: ${data.fetalMovement || '-'}</div>
                                    <div>${data.notes || ''}</div>
                                </div>
                                <button class="btn btn-danger" onclick="deleteConsultRecord('${doc.id}')">
                                    <i class="material-icons">delete</i>
                                </button>
                            </li>
                        `;
                    });
                    html += '</ul>';
                    
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error("Erro ao carregar histórico de consultas: ", error);
                    container.innerHTML = '<p>Erro ao carregar histórico.</p>';
                });
        }
        
        // Delete consult record
        function deleteConsultRecord(recordId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este registro?')) return;
            
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("consultas").doc(recordId).delete()
                .then(() => {
                    hideLoading();
                    displayConsultHistory();
                })
                .catch(error => {
                    console.error("Erro ao excluir registro de consulta: ", error);
                    hideLoading();
                    alert('Erro ao excluir registro. Tente novamente.');
                });
        }
        
        // Save vaccine
        function saveVaccine(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const isBaby = e.target.id === 'babyVaccineForm';
            const vaccineData = {
                type: isBaby ? 'bebe' : 'gestante',
                name: document.getElementById(isBaby ? 'babyVaccineName' : 'vaccineName').value,
                date: document.getElementById(isBaby ? 'babyVaccineDate' : 'vaccineDate').value,
                dose: document.getElementById(isBaby ? 'babyVaccineDose' : 'vaccineDose').value,
                timestamp: new Date()
            };

            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("vacinas").add(vaccineData)
                .then(() => {
                    hideLoading();
                    alert('Vacina registrada com sucesso!');
                    document.getElementById(isBaby ? 'babyVaccineForm' : 'vaccineForm').reset();
                    displayVaccineHistory();
                })
                .catch(error => {
                    console.error("Erro ao salvar vacina: ", error);
                    hideLoading();
                    alert('Erro ao registrar vacina. Tente novamente.');
                });
        }

        function displayVaccineHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('vaccineHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Get vaccine history from Firestore
            db.collection("usuarios").doc(currentUser.id).collection("vacinas")
                .orderBy("timestamp", "desc")
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum registro encontrado.</p>';
                        return;
                    }
                    
                    let html = '<ul class="history-list">';
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        html += `
                            <li class="list-item">
                                <div>
                                    <strong>${data.name}</strong> (${data.type === 'gestante' ? 'Gestante' : 'Bebê'})
                                    <div>Data: ${formatDate(data.date)} | Dose: ${data.dose}</div>
                                </div>
                                <button class="btn btn-danger" onclick="deleteVaccineRecord('${doc.id}')">
                                    <i class="material-icons">delete</i>
                                </button>
                            </li>
                        `;
                    });
                    html += '</ul>';
                    
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error("Erro ao carregar histórico de vacinas: ", error);
                    container.innerHTML = '<p>Erro ao carregar histórico.</p>';
                });
        }
        
        // Delete vaccine record
        function deleteVaccineRecord(recordId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este registro?')) return;
            
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("vacinas").doc(recordId).delete()
                .then(() => {
                    hideLoading();
                    displayVaccineHistory();
                })
                .catch(error => {
                    console.error("Erro ao excluir registro de vacina: ", error);
                    hideLoading();
                    alert('Erro ao excluir registro. Tente novamente.');
                });
        }
        
        // Change vaccine tab
        function changeVaccineTab(tab) {
            document.querySelectorAll('#screen11 .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#screen11 .tab-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`#screen11 .tab[onclick="changeVaccineTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}Vaccines`).classList.add('active');
        }
        
        // Save lab exam
        function saveLabExam(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const examName = document.getElementById('examName').value;
            const examDate = document.getElementById('examDate').value;
            const files = document.getElementById('labFiles').files;
            
            if (files.length === 0) {
                alert('Por favor, selecione pelo menos um arquivo.');
                return;
            }
            
            showLoading();
            
            // Salvar no localStorage
            const exams = JSON.parse(localStorage.getItem(`labExams_${currentUser.id}`)) || [];
            const newExam = {
                id: Date.now(),
                name: examName,
                date: examDate,
                files: []
            };
            
            // Processar arquivos
            const fileReaders = [];
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                fileReaders.push(new Promise((resolve) => {
                    reader.onload = function(event) {
                        newExam.files.push({
                            name: file.name,
                            type: file.type,
                            data: event.target.result
                        });
                        resolve();
                    };
                    reader.readAsDataURL(file);
                }));
            }
            
            Promise.all(fileReaders)
                .then(() => {
                    exams.push(newExam);
                    localStorage.setItem(`labExams_${currentUser.id}`, JSON.stringify(exams));
                    hideLoading();
                    alert('Exame registrado com sucesso!');
                    document.getElementById('labExamForm').reset();
                    displayLabExamsHistory();
                })
                .catch(error => {
                    console.error("Erro ao processar arquivos: ", error);
                    hideLoading();
                    alert('Erro ao processar arquivos. Tente novamente.');
                });
        }

        function displayLabExamsHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('labExamsHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Recuperar do localStorage
            const exams = JSON.parse(localStorage.getItem(`labExams_${currentUser.id}`)) || [];
            
            if (exams.length === 0) {
                container.innerHTML = '<p>Nenhum exame encontrado.</p>';
                return;
            }
            
            let html = '<ul class="history-list">';
            exams.forEach(exam => {
                html += `
                    <li class="list-item">
                        <div>
                            <strong>${exam.name}</strong> - ${formatDate(exam.date)}
                            <div class="file-previews">
                `;
                
                if (exam.files && exam.files.length > 0) {
                    exam.files.forEach(file => {
                        if (file.type === 'application/pdf') {
                            html += `<div><a href="${file.data}" target="_blank">${file.name}</a></div>`;
                        } else {
                            html += `<div><img src="${file.data}" class="file-preview" alt="${file.name}" onclick="openModal('${file.data}')"></div>`;
                        }
                    });
                } else {
                    html += '<div>Nenhum arquivo anexado</div>';
                }
                
                html += `
                            </div>
                        </div>
                        <button class="btn btn-danger" onclick="deleteLabExamRecord(${exam.id})">
                            <i class="material-icons">delete</i>
                        </button>
                    </li>
                `;
            });
            html += '</ul>';
            
            container.innerHTML = html;
        }

        // Delete lab exam record
        function deleteLabExamRecord(examId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este exame?')) return;
            
            const exams = JSON.parse(localStorage.getItem(`labExams_${currentUser.id}`)) || [];
            const updatedExams = exams.filter(exam => exam.id !== examId);
            localStorage.setItem(`labExams_${currentUser.id}`, JSON.stringify(updatedExams));
            displayLabExamsHistory();
        }

        // Save image exam
        function saveImageExam(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const examName = document.getElementById('imageExamName').value;
            const examDate = document.getElementById('imageExamDate').value;
            const files = document.getElementById('imageFiles').files;
            
            if (files.length === 0) {
                alert('Por favor, selecione pelo menos uma imagem.');
                return;
            }
            
            showLoading();
            
            // Salvar no localStorage
            const exams = JSON.parse(localStorage.getItem(`imageExams_${currentUser.id}`)) || [];
            const newExam = {
                id: Date.now(),
                name: examName,
                date: examDate,
                images: []
            };
            
            // Processar imagens
            const fileReaders = [];
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                fileReaders.push(new Promise((resolve) => {
                    reader.onload = function(event) {
                        newExam.images.push({
                            name: file.name,
                            data: event.target.result
                        });
                        resolve();
                    };
                    reader.readAsDataURL(file);
                }));
            }
            
            Promise.all(fileReaders)
                .then(() => {
                    exams.push(newExam);
                    localStorage.setItem(`imageExams_${currentUser.id}`, JSON.stringify(exams));
                    hideLoading();
                    alert('Exame registrado com sucesso!');
                    document.getElementById('imageExamForm').reset();
                    displayImageExamsHistory();
                })
                .catch(error => {
                    console.error("Erro ao processar imagens: ", error);
                    hideLoading();
                    alert('Erro ao processar imagens. Tente novamente.');
                });
        }

        function displayImageExamsHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('imageExamsHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Recuperar do localStorage
            const exams = JSON.parse(localStorage.getItem(`imageExams_${currentUser.id}`)) || [];
            
            if (exams.length === 0) {
                container.innerHTML = '<p>Nenhum exame encontrado.</p>';
                return;
            }
            
            let html = '<ul class="history-list">';
            exams.forEach(exam => {
                html += `
                    <li class="list-item">
                        <div>
                            <strong>${exam.name}</strong> - ${formatDate(exam.date)}
                            <div class="image-previews">
                `;
                
                if (exam.images && exam.images.length > 0) {
                    exam.images.forEach(image => {
                        html += `<img src="${image.data}" class="file-preview" alt="${image.name}" onclick="openModal('${image.data}')">`;
                    });
                } else {
                    html += '<div>Nenhuma imagem anexada</div>';
                }
                
                html += `
                            </div>
                        </div>
                        <button class="btn btn-danger" onclick="deleteImageExamRecord(${exam.id})">
                            <i class="material-icons">delete</i>
                        </button>
                    </li>
                `;
            });
            html += '</ul>';
            
            container.innerHTML = html;
        }
        
        // Delete image exam record
        function deleteImageExamRecord(examId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este exame?')) return;
            
            const exams = JSON.parse(localStorage.getItem(`imageExams_${currentUser.id}`)) || [];
            const updatedExams = exams.filter(exam => exam.id !== examId);
            localStorage.setItem(`imageExams_${currentUser.id}`, JSON.stringify(updatedExams));
            displayImageExamsHistory();
        }
        
        // Start contraction timer
        function startContractionTimer() {
            contractionStartTime = new Date();
            contractionTimerSeconds = 0;
            
            document.getElementById('startContractionBtn').style.display = 'none';
            document.getElementById('endContractionBtn').style.display = 'inline-block';
            
            contractionInterval = setInterval(() => {
                contractionTimerSeconds++;
                updateContractionTimerDisplay();
            }, 1000);
            
            document.getElementById('contractionStartTime').value = formatTime(contractionStartTime);
        }
        
        // End contraction timer
        function endContractionTimer() {
            if (!contractionInterval) return;
            
            clearInterval(contractionInterval);
            contractionInterval = null;
            
            document.getElementById('endContractionBtn').style.display = 'none';
            document.getElementById('startContractionBtn').style.display = 'inline-block';
            
            const endTime = new Date();
            document.getElementById('contractionEndTime').value = formatTime(endTime);
            document.getElementById('contractionDuration').value = formatDuration(contractionTimerSeconds);
        }
        
        // Reset contraction timer
        function resetContractionTimer() {
            if (contractionInterval) {
                clearInterval(contractionInterval);
                contractionInterval = null;
            }
            
            contractionTimerSeconds = 0;
            updateContractionTimerDisplay();
            
            document.getElementById('startContractionBtn').style.display = 'inline-block';
            document.getElementById('endContractionBtn').style.display = 'none';
            
            document.getElementById('contractionStartTime').value = '';
            document.getElementById('contractionEndTime').value = '';
            document.getElementById('contractionDuration').value = '';
        }
        
        // Update contraction timer display
        function updateContractionTimerDisplay() {
            const hours = Math.floor(contractionTimerSeconds / 3600);
            const minutes = Math.floor((contractionTimerSeconds % 3600) / 60);
            const seconds = contractionTimerSeconds % 60;
            
            document.getElementById('contractionTimer').textContent = 
                `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}`;
        }
        
        // Format time as HH:MM:SS
        function formatTime(date) {
            if (!date) return '';
            
            return `${padZero(date.getHours())}:${padZero(date.getMinutes())}:${padZero(date.getSeconds())}`;
        }
        
        // Format duration as HH:MM:SS
        function formatDuration(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            return `${padZero(hours)}:${padZero(minutes)}:${padZero(secs)}`;
        }
        
        // Pad zero for time display
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }
        
        // Save contraction
        function saveContraction(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const contractionData = {
                startTime: document.getElementById('contractionStartTime').value,
                endTime: document.getElementById('contractionEndTime').value,
                duration: document.getElementById('contractionDuration').value,
                intensity: document.getElementById('contractionIntensity').value,
                timestamp: new Date()
            };

            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("contracoes").add(contractionData)
                .then(() => {
                    hideLoading();
                    resetContractionTimer();
                    alert('Contração registrada com sucesso!');
                    document.getElementById('contractionForm').reset();
                    displayContractionHistory();
                })
                .catch(error => {
                    console.error("Erro ao salvar contração: ", error);
                    hideLoading();
                    alert('Erro ao registrar contração. Tente novamente.');
                });
        }

        function displayContractionHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('contractionHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Get contraction history from Firestore
            db.collection("usuarios").doc(currentUser.id).collection("contracoes")
                .orderBy("timestamp", "desc")
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum registro encontrado.</p>';
                        return;
                    }
                    
                    let html = '<ul class="history-list">';
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        html += `
                            <li class="list-item">
                                <div>
                                    <strong>${data.startTime}</strong> a <strong>${data.endTime}</strong>
                                    <div>Duração: ${data.duration} | Intensidade: ${data.intensity}</div>
                                </div>
                                <button class="btn btn-danger" onclick="deleteContractionRecord('${doc.id}')">
                                    <i class="material-icons">delete</i>
                                </button>
                            </li>
                        `;
                    });
                    html += '</ul>';
                    
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error("Erro ao carregar histórico de contrações: ", error);
                    container.innerHTML = '<p>Erro ao carregar histórico.</p>';
                });
        }
        
        // Delete contraction record
        function deleteContractionRecord(recordId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este registro?')) return;
            
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("contracoes").doc(recordId).delete()
                .then(() => {
                    hideLoading();
                    displayContractionHistory();
                })
                .catch(error => {
                    console.error("Erro ao excluir registro de contração: ", error);
                    hideLoading();
                    alert('Erro ao excluir registro. Tente novamente.');
                });
        }
        
        // Save diary entry
        function saveDiaryEntry(e) {
            e.preventDefault();
            
            if (!currentUser) return;
            
            const diaryEntry = {
                date: document.getElementById('diaryDate').value,
                feelings: document.getElementById('diaryFeelings').value,
                symptoms: document.getElementById('diarySymptoms').value,
                questions: document.getElementById('diaryQuestions').value,
                timestamp: new Date()
            };

            // Save to Firestore
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("diario").add(diaryEntry)
                .then(() => {
                    hideLoading();
                    alert('Registro do diário salvo com sucesso!');
                    document.getElementById('diaryForm').reset();
                    displayDiaryHistory();
                })
                .catch(error => {
                    console.error("Erro ao salvar registro do diário: ", error);
                    hideLoading();
                    alert('Erro ao salvar registro. Tente novamente.');
                });
        }

        function displayDiaryHistory() {
            if (!currentUser) return;
            
            const container = document.getElementById('diaryHistory');
            container.innerHTML = '<p>Carregando...</p>';
            
            // Get diary history from Firestore
            db.collection("usuarios").doc(currentUser.id).collection("diario")
                .orderBy("timestamp", "desc")
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum registro encontrado.</p>';
                        return;
                    }
                    
                    let html = '<ul class="history-list">';
                    querySnapshot.forEach(doc => {
                        const data = doc.data();
                        html += `
                            <li class="list-item">
                                <div>
                                    <strong>${formatDate(data.date)}</strong>
                                    <div>Sentimentos: ${data.feelings}</div>
                                    <div>Sintomas: ${data.symptoms || '-'}</div>
                                    <div>Dúvidas: ${data.questions || '-'}</div>
                                </div>
                                <button class="btn btn-danger" onclick="deleteDiaryRecord('${doc.id}')">
                                    <i class="material-icons">delete</i>
                                </button>
                            </li>
                        `;
                    });
                    html += '</ul>';
                    
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error("Erro ao carregar histórico do diário: ", error);
                    container.innerHTML = '<p>Erro ao carregar histórico.</p>';
                });
        }
        
        // Delete diary record
        function deleteDiaryRecord(recordId) {
            if (!currentUser || !confirm('Tem certeza que deseja excluir este registro?')) return;
            
            showLoading();
            
            db.collection("usuarios").doc(currentUser.id).collection("diario").doc(recordId).delete()
                .then(() => {
                    hideLoading();
                    displayDiaryHistory();
                })
                .catch(error => {
                    console.error("Erro ao excluir registro do diário: ", error);
                    hideLoading();
                    alert('Erro ao excluir registro. Tente novamente.');
                });
        }
        
        // Handle baby photo upload
        function handleBabyPhotoUpload(e) {
            const files = e.target.files;
            if (files.length === 0) return;
            
            if (!currentUser) return;
            
            // Recuperar fotos existentes
            const babyPhotos = JSON.parse(localStorage.getItem(`babyPhotos_${currentUser.id}`)) || [];
            
            // Processar cada arquivo
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    const newPhoto = {
                        id: Date.now(),
                        data: event.target.result
                    };
                    babyPhotos.push(newPhoto);
                    localStorage.setItem(`babyPhotos_${currentUser.id}`, JSON.stringify(babyPhotos));
                    displayBabyGallery();
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        // Display baby gallery
        function displayBabyGallery() {
            if (!currentUser) return;
            
            const container = document.getElementById('babyGallery');
            container.innerHTML = '';
            
            // Recuperar fotos do localStorage
            const babyPhotos = JSON.parse(localStorage.getItem(`babyPhotos_${currentUser.id}`)) || [];
            
            // Adicionar fotos
            babyPhotos.forEach(photo => {
                const photoElement = document.createElement('div');
                photoElement.className = 'gallery-item';
                photoElement.innerHTML = `
                    <img src="${photo.data}" alt="Foto do bebê" onclick="openModal('${photo.data}')">
                    <button class="delete-btn" onclick="deleteBabyPhoto(${photo.id})">
                        <i class="material-icons">delete</i>
                    </button>
                `;
                container.appendChild(photoElement);
            });
            
            // Adicionar botão de adicionar
            const addButton = document.createElement('div');
            addButton.className = 'gallery-item add-photo';
            addButton.innerHTML = '<i class="material-icons">add</i>';
            addButton.onclick = () => document.getElementById('babyPhotoInput').click();
            container.appendChild(addButton);
        }
        
        // Delete baby photo
        function deleteBabyPhoto(photoId) {
            if (!currentUser) return;
            
            let babyPhotos = JSON.parse(localStorage.getItem(`babyPhotos_${currentUser.id}`)) || [];
            babyPhotos = babyPhotos.filter(photo => photo.id !== photoId);
            localStorage.setItem(`babyPhotos_${currentUser.id}`, JSON.stringify(babyPhotos));
            displayBabyGallery();
        }
        
        // Doctor login
        function doctorLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('doctorUsername').value;
            const password = document.getElementById('doctorPassword').value;
            
            if (username === 'admin' && password === 'inovação2025') {
                showScreen('screen21');
            } else {
                alert('Usuário ou senha incorretos.');
            }
        }
        
        // Load patients
        function loadPatients() {
            const container = document.getElementById('patientsList');
            container.innerHTML = '<p>Carregando pacientes...</p>';
            
            db.collection("usuarios").get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        container.innerHTML = '<p>Nenhum paciente encontrado.</p>';
                        return;
                    }
                    
                    let html = '';
                    querySnapshot.forEach(doc => {
                        const user = doc.data();
                        html += `
                            <div class="patient-item" onclick="loadPatientDetails('${doc.id}')">
                                <div class="patient-name">${user.fullName}</div>
                                <div class="patient-details">CPF: ${user.cpf} | Email: ${user.email}</div>
                            </div>
                        `;
                    });
                    
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error("Erro ao carregar pacientes: ", error);
                    container.innerHTML = '<p>Erro ao carregar pacientes.</p>';
                });
        }
        
        // Search patients
        function searchPatients() {
            const searchTerm = document.getElementById('searchPatient').value.toLowerCase();
            const patients = document.querySelectorAll('.patient-item');
            
            patients.forEach(patient => {
                const name = patient.querySelector('.patient-name').textContent.toLowerCase();
                const details = patient.querySelector('.patient-details').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || details.includes(searchTerm)) {
                    patient.style.display = 'block';
                } else {
                    patient.style.display = 'none';
                }
            });
        }
        
        // Load patient details
        function loadPatientDetails(patientId) {
            currentPatientId = patientId;
            showLoading();
            
            const container = document.getElementById('patientDetails');
            container.innerHTML = '<p>Carregando dados do paciente...</p>';
            
            // Get patient data
            db.collection("usuarios").doc(patientId).get()
                .then(doc => {
                    if (!doc.exists) {
                        hideLoading();
                        container.innerHTML = '<p>Paciente não encontrado.</p>';
                        return;
                    }
                    
                    const user = doc.data();
                    let html = `
                        <div class="card">
                            <h2 class="card-title">${user.fullName}</h2>
                            
                            <form id="editPatientForm">
                                <div class="form-group">
                                    <label for="patientFullName">Nome Completo</label>
                                    <input type="text" id="patientFullName" class="form-control" value="${user.fullName}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientBirthDate">Data de Nascimento</label>
                                    <input type="date" id="patientBirthDate" class="form-control" value="${user.birthDate}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientCpf">CPF</label>
                                    <input type="text" id="patientCpf" class="form-control" value="${user.cpf}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientSusCard">Cartão SUS</label>
                                    <input type="text" id="patientSusCard" class="form-control" value="${user.susCard}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientEmail">Email</label>
                                    <input type="email" id="patientEmail" class="form-control" value="${user.email}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientOccupation">Ocupação</label>
                                    <input type="text" id="patientOccupation" class="form-control" value="${user.occupation}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientAddress">Endereço</label>
                                    <input type="text" id="patientAddress" class="form-control" value="${user.address}" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="patientEmergencyPhone">Telefone de Emergência</label>
                                    <input type="tel" id="patientEmergencyPhone" class="form-control" value="${user.emergencyPhone}" readonly>
                                </div>
                                
                                <div id="editPatientControls" style="display: none; margin-top: 20px;">
                                    <button type="button" class="btn" onclick="savePatientChanges()">Salvar Alterações</button>
                                    <button type="button" class="btn btn-outline" onclick="cancelEditPatient()">Cancelar</button>
                                </div>
                            </form>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn" onclick="showPatientScreen('screen10')">
                                    <i class="material-icons btn-icon">pregnant_woman</i>
                                    Consultas da Gestante
                                </button>
                                <button class="btn" onclick="showPatientScreen('screen11')" style="margin-top: 10px;">
                                    <i class="material-icons btn-icon">vaccines</i>
                                    Cartão de Vacina
                                </button>
                                <button class="btn" onclick="showPatientScreen('screen12')" style="margin-top: 10px;">
                                    <i class="material-icons btn-icon">science</i>
                                    Exames Laboratoriais
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.innerHTML = html;
                    hideLoading();
                    
                    // Configurar botão de edição
                    const editBtn = document.getElementById('editPatientBtn');
                    editBtn.onclick = () => {
                        isEditingPatient = !isEditingPatient;
                        togglePatientEditMode(isEditingPatient);
                    };
                })
                .catch(error => {
                    console.error("Erro ao carregar paciente: ", error);
                    hideLoading();
                    container.innerHTML = '<p>Erro ao carregar dados do paciente.</p>';
                });
        }
        
        function togglePatientEditMode(enable) {
            const fields = [
                'patientFullName', 'patientBirthDate', 'patientCpf',
                'patientSusCard', 'patientEmail', 'patientOccupation',
                'patientAddress', 'patientEmergencyPhone'
            ];
            
            fields.forEach(field => {
                const element = document.getElementById(field);
                element.readOnly = !enable;
            });
            
            document.getElementById('editPatientControls').style.display = enable ? 'flex' : 'none';
            document.getElementById('editPatientBtn').textContent = enable ? 'Cancelar' : 'Editar';
        }
        
        function savePatientChanges() {
            showLoading();
            
            const updatedData = {
                fullName: document.getElementById('patientFullName').value,
                birthDate: document.getElementById('patientBirthDate').value,
                cpf: document.getElementById('patientCpf').value,
                susCard: document.getElementById('patientSusCard').value,
                email: document.getElementById('patientEmail').value,
                occupation: document.getElementById('patientOccupation').value,
                address: document.getElementById('patientAddress').value,
                emergencyPhone: document.getElementById('patientEmergencyPhone').value
            };
            
            db.collection("usuarios").doc(currentPatientId).update(updatedData)
                .then(() => {
                    hideLoading();
                    alert('Dados do paciente atualizados com sucesso!');
                    isEditingPatient = false;
                    togglePatientEditMode(false);
                    loadPatientDetails(currentPatientId); // Recarregar dados
                })
                .catch(error => {
                    console.error("Erro ao atualizar paciente: ", error);
                    hideLoading();
                    alert('Erro ao atualizar dados do paciente.');
                });
        }
        
        function cancelEditPatient() {
            isEditingPatient = false;
            togglePatientEditMode(false);
            loadPatientDetails(currentPatientId); // Recarregar dados originais
        }
        
        function showPatientScreen(screenId) {
            showScreen(screenId);
        }
        
        // Change guidance tab
        function changeGuidanceTab(tab) {
            document.querySelectorAll('#screen18 .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#screen18 .tab-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`#screen18 .tab[onclick="changeGuidanceTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}Guidance`).classList.add('active');
        }
        
        // Open image modal
        function openModal(imageUrl) {
            modalImage.src = imageUrl;
            imageModal.style.display = 'flex';
        }
        
        // Close image modal
        function closeModal() {
            imageModal.style.display = 'none';
        }
        
        // Call emergency number
        function callNumber(number) {
            if (confirm(`Deseja ligar para ${number}?`)) {
                window.location.href = `tel:${number}`;
            }
        }
        
        // Install PWA
        function installPWA() {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            
            deferredPrompt.userChoice.then(choiceResult => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                    installBtn.classList.remove('show');
                } else {
                    console.log('User dismissed the install prompt');
                }
                
                deferredPrompt = null;
            });
        }

        // Handle beta card click
        function handleBetaCard() {
            alert('Esta função ainda não foi implementada.');
            return false;
        }

        // Show app info
        function showAppInfo() {
            alert('Aplicativo desenvolvido pelo grupo de Inovação e Saúde 2025.1\n\nAutores:\nAna Paula Silveira Fonseca\nCamila Bruno da Silva\nDeivisson Alan Silva Santos\nGiovana Nogueira e Silva\nInara Almeida Simões\nLara Melo Lafetá\nMaria Thereza Flávio da Cruz\nRana Silva Victor\nSabrina Gonçalves Silva Pereira');
        }
        
        // Show loading overlay
        function showLoading() {
            loadingOverlay.style.display = 'flex';
            setTimeout(() => {
                loadingOverlay.style.opacity = '1';
            }, 10);
        }
        
        // Hide loading overlay
        function hideLoading() {
            loadingOverlay.style.opacity = '0';
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 300);
        }
    </script>
</body>
</html>
